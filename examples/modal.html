<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>GhostlyConsent.js - Modal Example</title>
    
    <!-- GhostlyConsent.js -->
    <link rel="stylesheet" href="../dist/GhostlyConsent.css">
    <script src="../dist/GhostlyConsent.js"></script>
  </head>
  
  <div class="text-center">
    <a href="index.html">Simple</a>
    <a href="minimal.html">Minimal</a>
    <a href="#">Modal Example</a>
    <a href="events.html">Events</a>
  </div>
  
  <div class="ghostly-consent-banner gh-modal" id="gh-cookie-consent" style="display: none;">
    <div class="ghostly-consent-banner__inner gh-modal-content" id="gh-modal">
      <div class="ghostly-consent-banner__copy">
        <!-- consent title -->
        <div class="gh-modal-header">
            <span class="gh-close">&times;</span>
            THIS WEBSITE USES COOKIES
        </div>
        <!-- consent message -->
        <div class="gh-modal-body">
          We use cookies to personalise content and ads, to provide social media features and to analyse our traffic. 
          We also share information about your use of our site with our social media, advertising and analytics partners 
          who may combine it with other information that you've provided to them or that they've collected from your use 
          of their services. You consent to our cookies if you continue to use our website.
        </div>
      </div>
  
      <!-- personalization form -->
      <div class="ghostly-consent-personalize pt-0 pb-0" id="gh-cookie-personalization" style="display: none;"></div>
  
      <!-- consent actions -->
      <div class="gh-modal-footer">
        <a href="#" class="ghostly-consent-banner__cta" id="gh-cookie-enable">Accept all</a>
        <a href="javascript:void(0);" class="ghostly-consent-banner__cta ghostly-consent-banner__cta--alternative text-dark" id="gh-cookie-decline">Decline all</a>
        <a href="javascript:void(0);" class="ghostly-consent-banner__cta ghostly-consent-banner__cta--alternative pull-right text-dark" id="gh-cookie-personalize">Personalize</a>
      </div>
      <!-- /-- consent actions --/ -->
    </div>
  </div>
  
  <!-- bottom cookie bar -->
  <div class="gh-widget"><p>Cookies</p></div>

  <script>
  // Options
  var options = {
    name: '_modal',
    elements: {
      consentWrapper: '#gh-cookie-consent'
    },
  };

  // files you wish to load after accepted 
  // if array is used then set scope: permissions and use disallowed in there to set rule for all files 
  // if disallowed key is not set then the default is set to true
  // if type is not set then it will load the file using ajax
  var files = [
    {
      title: 'Google Fonts',
      name: 'font',
      file: 'https://fonts.googleapis.com/css2?family=Roboto:wght@100&display=swap',
      type: 'css',
      ajax: false,
      disallowed: false
    },
    analytics = [
      {
        scope: 'meta',
        title: 'Google Analytics',
        name: 'analytics'
      },
      {
        scope: 'permissions',
        disallowed: false
      },
      {
        file: 'https://www.googletagmanager.com/gtag/js?id=UA-44404621-1',
        type: 'js'
      },
      {
        file: '../../vendor/Google-Analytics.js', 
        type: 'js'
      }
    ],
  ];

  // initialize
  ghostlyConsent.init(options, files);
    
  // calls function statusChange(); after consents state is changed
  ghostlyConsent.on('status', statusChange);

  // calls function onload(); after Ghostly is ready
  ghostlyConsent.on('initialized', ready);

  // calls function personalize(); after personalize button is triggered
  ghostlyConsent.on('personalize', personalize);

  // statusChange
  function statusChange(event) {
    // get the whole event
    console.log(event);

    if(event.value) {
      // do something if consent is accepted
      // alternatively you can use this to load your own files
      // or do something else..
      console.log("Consent was accepted");
    } else {
      // do something if consent is rejected
      console.log("Consent was rejected");
    }
 
  }

  // ready
  function ready(event) {
    // bind click to .gh-widget
    var widget = document.querySelector('.gh-widget');
    widget.addEventListener('click', function(eventObj) { 
      ghostlyConsent.display(true);
    });

    // example of checking if cookie exists. 
    var cookieExists = ghostlyConsent.check(); // returns true, false
    console.log(cookieExists);

    // example of getting the cookie value
    var cookieValue = ghostlyConsent.get(); // returns cookie value (string)
    if(cookieValue == 'true') {
      console.log("cookieValue: true"); // consent has been accepted
    } else {
      console.log("cookieValue: false"); // consent has not been accepted
    }
  }

  // personalize
  function personalize(event) {
    if(event.value) {
      console.log("personalize: true"); // personalize is open
    } else {
      console.log("personalize: false"); // personalize is closed
    }
  }
</script>